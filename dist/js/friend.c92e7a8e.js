"use strict";(self["webpackChunknew_test_vk"]=self["webpackChunknew_test_vk"]||[]).push([[399],{29:function(e,s,t){t.r(s),t.d(s,{default:function(){return y}});var n=t(252),i=t(577);const l={class:"d-flex"},r={class:""},o=(0,n._)("h3",null,"Общий друзья",-1),c={class:"get-friends-items"},d={class:"d-flex justify-content-center align-items-center"},a=["src"],f={class:"mb-0 me-2"},_={class:"mb-0"},m={class:""},u=(0,n._)("h3",null,"Записи на стене",-1),g={class:"get-friends-items"};function h(e,s,t,h,p,w){return(0,n.wg)(),(0,n.iD)("div",l,[(0,n._)("div",r,[o,(0,n._)("ul",c,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(h.common_friends,((e,s)=>((0,n.wg)(),(0,n.iD)("li",{class:"get-friends-link",key:s},[(0,n._)("div",d,[(0,n._)("img",{class:"get-friends-link-img",src:e.photo_50,alt:""},null,8,a),(0,n._)("p",f,(0,i.zw)(e.first_name),1),(0,n._)("p",_,(0,i.zw)(e.last_name),1)])])))),128))])]),(0,n._)("div",m,[u,(0,n._)("ul",g,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(h.posts,((e,s)=>((0,n.wg)(),(0,n.iD)("li",{class:"get-friends-link",key:s},(0,i.zw)(e.text),1)))),128))])])])}var p=t(231),w=t(262),b={setup(){return{all_friend:p.yw,selected_friend:p.iI,selected_friend_common:p.N7,common_friends:(0,w.iH)([]),v:"5.154",posts:(0,w.iH)([])}},mounted(){console.log("Choose",this.selected_friend),this.getCommonFriends(),this.getPosts()},methods:{getCommonFriends(){this.all_friend.forEach((e=>{this.selected_friend_common.includes(e.id)&&this.common_friends.push(e)})),console.log(this.common_friends)},async getPosts(){self=this,await VK.Api.call("wall.get",{owner_id:this.selected_friend,filter:"owner",v:this.v},(function(e){e.response&&(self.posts=e.response.items,console.log(e.response))}))}}},v=t(744);const k=(0,v.Z)(b,[["render",h]]);var y=k},723:function(e,s,t){t.r(s),t.d(s,{default:function(){return F}});var n=t(252),i=t(963),l=t(577);const r={class:""},o={class:"get-friends"},c={class:"mb-4"},d={class:"mb-4"},a={class:"mb-4"},f={key:0,class:"get-friends-items"},_={class:"d-flex justify-content-center align-items-center"},m=["src"],u={class:"mb-0 me-2"},g={class:"mb-0"},h={class:"d-flex justify-content-center align-items-center"},p=["onClick"],w=["onClick"];function b(e,s,t,b,v,k){return(0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("div",o,[(0,n._)("div",c,[(0,n._)("button",{onClick:s[0]||(s[0]=(...e)=>k.getFriend&&k.getFriend(...e)),class:"btn btn-primary"},"Загрузите список друзей")]),(0,n._)("div",d,[(0,n._)("button",{onClick:s[1]||(s[1]=(...e)=>k.buildNewListFriends&&k.buildNewListFriends(...e)),class:"btn btn-primary"},"Построить")]),(0,n._)("div",a,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>b.select_friends=e),onInput:s[3]||(s[3]=(...e)=>k.newFriends&&k.newFriends(...e)),class:"form-control",placeholder:"Начните вводить текст для поиска друга, которого хотите добавить",type:"text",name:"",id:""},null,544),[[i.nr,b.select_friends]])]),0!=b.all_friend.length?((0,n.wg)(),(0,n.iD)("ul",f,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(b.all_friend,((e,s)=>((0,n.wg)(),(0,n.iD)("li",{class:"get-friends-link",key:s},[(0,n._)("div",_,[(0,n._)("img",{class:"get-friends-link-img",src:e.photo_50,alt:""},null,8,m),(0,n._)("p",u,(0,l.zw)(e.first_name),1),(0,n._)("p",g,(0,l.zw)(e.last_name),1)]),(0,n._)("div",h,[(0,n._)("button",{onClick:s=>e.isAdd=!0,class:"btn btn1"},"Добавить",8,p),e.isAdd?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:s=>e.isAdd=!1,class:"btn btn2"},"Удалить",8,w)):(0,n.kq)("",!0)])])))),128))])):(0,n.kq)("",!0)])])}var v=t(262),k=t(231),y={setup(){return{AppID:"51773846",v:"5.154",friends:(0,v.iH)([]),select_friends:(0,v.iH)(""),list_friend:k.N8,all_friend:k.yw,get_friend:(0,v.iH)(!0)}},methods:{buildNewListFriends(){this.list_friend.splice(0,this.list_friend.length),this.all_friend.filter((e=>!0===e.isAdd?this.list_friend.push(e):"")),this.$router.push("/list")},newFriends(){const e=this.select_friends.toLowerCase();this.all_friend=this.all_friend.filter((s=>{const t=s.first_name.toLowerCase(),n=s.last_name.toLowerCase();return s?t.startsWith(e)||n.startsWith(e):""}))},async getFriend(){self=this,await VK.Api.call("friends.get",{fields:"photo_50,bdate,sex",v:this.v},(function(e){e.response&&(self.all_friend=e.response.items)}))}}},C=t(744);const D=(0,C.Z)(y,[["render",b]]);var F=D},920:function(e,s,t){t.r(s),t.d(s,{default:function(){return v}});var n=t(252),i=t(577);const l={class:"d-flex justify-content-center align-items-center"},r={class:"get-friends-items"},o=["onClick"],c={class:"d-flex justify-content-center align-items-center"},d=["src"],a={class:"mb-0 me-2"},f={class:"mb-0 me-2"},_={class:"mb-0 me-2"},m={class:"mb-0"};function u(e,s,t,u,g,h){return(0,n.wg)(),(0,n.iD)("div",l,[(0,n._)("button",{onClick:s[0]||(s[0]=e=>this.$router.push("/")),class:"btn-list btn btn-primary"},"Назад"),(0,n._)("ul",r,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(u.list_friend,((e,s)=>((0,n.wg)(),(0,n.iD)("li",{onClick:s=>h.openFriendInfo(e.id,e.common_friends),class:"get-friends-link",key:s,style:(0,i.j5)(`background-color: rgba(18, 0, 255,${e.percent_common_friends});`)},[(0,n._)("div",c,[(0,n._)("img",{class:"get-friends-link-img",src:e.photo_50,alt:""},null,8,d),(0,n._)("p",a,(0,i.zw)(e.first_name),1),(0,n._)("p",f,(0,i.zw)(e.last_name),1),(0,n._)("p",_,(0,i.zw)(e.age),1),(0,n._)("p",m,(0,i.zw)(1===e.sex?"Женский пол":"Мужской пол"),1)])],12,o)))),128))])])}var g=t(231),h=t(262),p={setup(){return{AppID:"51773846",v:"5.154",list_friend:g.N8,selected_friend:g.iI,selected_friend_common:g.N7,mutual_friends:(0,h.iH)([]),style:(0,h.iH)(0)}},mounted(){this.getGeneralFriend()},methods:{getAge(){this.list_friend.forEach((e=>{let s=e.bdate.split("."),t=new Date(s[2],s[1]-1,s[0]),n=new Date,i=n.getFullYear()-t.getFullYear();(n.getMonth()<t.getMonth()||n.getMonth()===t.getMonth()&&n.getDate()<t.getDate())&&i--,e.age="0","1"===i.toString().slice(-1)?e.age=`${i} год`:i.toString().slice(-1)>="2"&&i.toString().slice(-1)<="4"?e.age=`${i} года`:i.toString().slice(-1)>="5"&&(e.age=`${i} лет`)}))},async getGeneralFriend(){self=this;let e="";this.list_friend.forEach((s=>{0===e.length?e+=s.id:e+=","+s.id})),await VK.Api.call("friends.getMutual",{target_uids:e,v:this.v},(function(e){e.response?(self.mutual_friends=e.response,self.calcColorAndSort(e.response)):console.log(e)}))},async calcColorAndSort(e){let s=0;e.filter((e=>{s<e.common_count&&(s=e.common_count)})),await this.list_friend.forEach(((e,t)=>{e.common_friends=this.mutual_friends[t].common_friends,e.percent_common_friends=(this.mutual_friends[t].common_count/s).toFixed(1)})),this.list_friend.sort(((e,s)=>e.first_name<s.first_name?-1:e.first_name>s.first_name?1:e.last_name<s.last_name?-1:e.last_name>s.last_name?1:0)),console.log(this.list_friend)},openFriendInfo(e,s){this.selected_friend=e,this.selected_friend_common=s,console.log(this.selected_friend),console.log(this.selected_friend_common),this.$router.push("/friend-info")}}},w=t(744);const b=(0,w.Z)(p,[["render",u]]);var v=b},231:function(e,s,t){t.d(s,{N7:function(){return o},N8:function(){return i},iI:function(){return r},yw:function(){return l}});var n=t(262);const i=(0,n.iH)([]),l=(0,n.iH)([]),r=(0,n.iH)(),o=(0,n.iH)([])}}]);
//# sourceMappingURL=friend.c92e7a8e.js.map